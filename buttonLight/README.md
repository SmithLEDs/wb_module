<h1 align="left">
  <br>
  <img height="150" src="logo_moduleButtonLight.png">
  <br>
  <b>Модуль для управления группой света</b>
  <br>
</h1>


### Описание

Данный модуль создает новое виртуальное устройство с новыми контролами для управления светом. 

* Реализована возможность одновременного управления не только одним реле, но и множеством реле.
* Управление из WEB интерфейса по виртуальной кнопке или с физических кнопок или выключателей. Можно указать множество кнопок.
* Есть возможность управления по датчикам движения.

### Примеры

На этом этапе у вас уже должен быть загружен модуль в контроллер. Смотри инструкцию на [главной странице](https://github.com/SmithLEDs/wb_module/tree/main).

**1. Одна лампочка - один выключатель.** Классический пример по управлению одной нагрузкой с одного выключателя. В функцию `createLightingGroup` передаем четыре параметра:
1. Описание виртуального устройства (Можно на русском)
2. Имя виртуального устройства (Будет отображаться в новом виртуальном кстройстве как `name/...` )
3. Одиночный топик или массив топиков, по изменению которых будет происходить переключение света (Кнопки, выключатели)
4. Одиночный топик или массив топиков, которыми будет происходить управление (Реле)

```js
var button = require('moduleButtonLight'); // Подключим наш модуль


var but = 'testButton/Input 1';     // Создаем переменную с указанием топика физической кнопки
                                    // или 'testButton/Input 1 counter' для выключателя без фиксации
var light = 'wb-mr6c_1/K5';         // Создаем переменную с указанием реле, на которое подключена лампочка

// Создаем виртуальное устройства при помощи подключенного модуля
button.createLightingGroup('Свет на кухне' , 'Light_kitchen' , but , light );    
```
<h1 align="center">
  <img src="/buttonLight/img/1-1.png">
  <br>
</h1>

Создается новое виртуальное устройство. В него автоматически попадают указанные в переменных `but` и `light` контролы света и реле. Новые контролы для света и реле доступны только для чтения и отображения реального состояния физических устройств. Для контролов реле доступно управление прямо из виртуального устройства, сделано больше для визуальной наглядности. Так же отображается общее количество кнопок и реле. Топик `Состояние группы` отображает общее состояние реле и работает по принципу - если хоть одно реле включено, то состояние группы считается включенным.

**2. Три лампочки - два выключателя.** Усложним задачу и будем управлять группой нагрузок с двух разных мест.

```js
var button = require('moduleButtonLight'); // Подключим наш модуль

// Создаем переменную с указанием массива топиков физических кнопок
// Один выключатель типа switch и одна кнопка без фиксации с счетчиком коротких нажатий
var but = [
    'testButton/Input 1',
    'testButton/Input 2 counter'
];     

// Создаем переменную с указанием массива реле, которыми надо управлять
var light = [
    'wb-mr6c_1/K4',
    'wb-mr6c_1/K5',
    'wb-mr6c_1/K6'
];         

// Создаем виртуальное устройства при помощи подключенного модуля
button.createLightingGroup('Свет в коридоре' , 'Light_hallway' , but , light );    
```
<h1 align="center">
  <img src="/buttonLight/img/2-1.png">
  <br>
</h1>
